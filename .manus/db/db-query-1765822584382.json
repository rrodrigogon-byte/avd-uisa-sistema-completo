{
  "query": "\nCREATE TABLE IF NOT EXISTS `npsScheduledTriggers` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `surveyId` int NOT NULL,\n  `employeeId` int NOT NULL,\n  `processId` int NOT NULL,\n  `scheduledFor` datetime NOT NULL,\n  `delayMinutes` int DEFAULT 0,\n  `status` enum('pending','sent','responded','expired','cancelled') DEFAULT 'pending' NOT NULL,\n  `sentAt` datetime,\n  `respondedAt` datetime,\n  `responseId` int,\n  `triggerReason` varchar(100) DEFAULT 'pdi_completed',\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `npsScheduledTriggers_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `npsSettings` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `autoTriggerEnabled` boolean DEFAULT true,\n  `defaultDelayMinutes` int DEFAULT 1440,\n  `reminderEnabled` boolean DEFAULT true,\n  `reminderDelayMinutes` int DEFAULT 4320,\n  `maxReminders` int DEFAULT 2,\n  `detractorAlertEnabled` boolean DEFAULT true,\n  `detractorThreshold` int DEFAULT 6,\n  `alertRecipientEmails` text,\n  `surveyExpirationDays` int DEFAULT 7,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `npsSettings_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `npsDetractorAlerts` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `responseId` int NOT NULL,\n  `employeeId` int NOT NULL,\n  `surveyId` int NOT NULL,\n  `score` int NOT NULL,\n  `comment` text,\n  `status` enum('new','acknowledged','in_progress','resolved','dismissed') DEFAULT 'new' NOT NULL,\n  `acknowledgedBy` int,\n  `acknowledgedAt` datetime,\n  `resolvedBy` int,\n  `resolvedAt` datetime,\n  `resolutionNotes` text,\n  `notificationSentAt` datetime,\n  `notificationRecipients` text,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `npsDetractorAlerts_id` PRIMARY KEY(`id`)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2zjpxFGuGsCP7jR.root --database Vd5BJ8toX8cUC4zST6itFN --execute \nCREATE TABLE IF NOT EXISTS `npsScheduledTriggers` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `surveyId` int NOT NULL,\n  `employeeId` int NOT NULL,\n  `processId` int NOT NULL,\n  `scheduledFor` datetime NOT NULL,\n  `delayMinutes` int DEFAULT 0,\n  `status` enum('pending','sent','responded','expired','cancelled') DEFAULT 'pending' NOT NULL,\n  `sentAt` datetime,\n  `respondedAt` datetime,\n  `responseId` int,\n  `triggerReason` varchar(100) DEFAULT 'pdi_completed',\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `npsScheduledTriggers_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `npsSettings` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `autoTriggerEnabled` boolean DEFAULT true,\n  `defaultDelayMinutes` int DEFAULT 1440,\n  `reminderEnabled` boolean DEFAULT true,\n  `reminderDelayMinutes` int DEFAULT 4320,\n  `maxReminders` int DEFAULT 2,\n  `detractorAlertEnabled` boolean DEFAULT true,\n  `detractorThreshold` int DEFAULT 6,\n  `alertRecipientEmails` text,\n  `surveyExpirationDays` int DEFAULT 7,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `npsSettings_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `npsDetractorAlerts` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `responseId` int NOT NULL,\n  `employeeId` int NOT NULL,\n  `surveyId` int NOT NULL,\n  `score` int NOT NULL,\n  `comment` text,\n  `status` enum('new','acknowledged','in_progress','resolved','dismissed') DEFAULT 'new' NOT NULL,\n  `acknowledgedBy` int,\n  `acknowledgedAt` datetime,\n  `resolvedBy` int,\n  `resolvedAt` datetime,\n  `resolutionNotes` text,\n  `notificationSentAt` datetime,\n  `notificationRecipients` text,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `npsDetractorAlerts_id` PRIMARY KEY(`id`)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 551
}