{
  "query": "CREATE TABLE IF NOT EXISTS `notificationQueue` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `ruleId` INT,\n  `triggerEvent` VARCHAR(100) NOT NULL,\n  `eventData` TEXT NOT NULL,\n  `recipientUserId` INT,\n  `recipientEmail` VARCHAR(320),\n  `recipientName` VARCHAR(255),\n  `subject` VARCHAR(500) NOT NULL,\n  `body` TEXT NOT NULL,\n  `channel` ENUM('email', 'in_app', 'push') NOT NULL,\n  `priority` ENUM('baixa', 'normal', 'alta', 'urgente') DEFAULT 'normal' NOT NULL,\n  `status` ENUM('pendente', 'processando', 'enviado', 'falha', 'cancelado') DEFAULT 'pendente' NOT NULL,\n  `attempts` INT DEFAULT 0 NOT NULL,\n  `maxAttempts` INT DEFAULT 3 NOT NULL,\n  `lastAttemptAt` DATETIME,\n  `nextAttemptAt` DATETIME,\n  `sentAt` DATETIME,\n  `errorMessage` TEXT,\n  `scheduledFor` DATETIME,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS `notificationHistory` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `queueId` INT,\n  `ruleId` INT,\n  `recipientUserId` INT,\n  `recipientEmail` VARCHAR(320),\n  `subject` VARCHAR(500) NOT NULL,\n  `body` TEXT NOT NULL,\n  `channel` VARCHAR(50) NOT NULL,\n  `status` ENUM('enviado', 'falha') NOT NULL,\n  `errorMessage` TEXT,\n  `opened` BOOLEAN DEFAULT FALSE NOT NULL,\n  `openedAt` DATETIME,\n  `clicked` BOOLEAN DEFAULT FALSE NOT NULL,\n  `clickedAt` DATETIME,\n  `sentAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS `userNotificationPreferences` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `userId` INT NOT NULL UNIQUE,\n  `notifyNewAttachment` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyPirChanges` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyGoalUpdates` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notify360Completion` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyFeedback` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyPdiUpdates` BOOLEAN DEFAULT TRUE NOT NULL,\n  `emailEnabled` BOOLEAN DEFAULT TRUE NOT NULL,\n  `inAppEnabled` BOOLEAN DEFAULT TRUE NOT NULL,\n  `pushEnabled` BOOLEAN DEFAULT FALSE NOT NULL,\n  `quietHoursEnabled` BOOLEAN DEFAULT FALSE NOT NULL,\n  `quietHoursStart` VARCHAR(5),\n  `quietHoursEnd` VARCHAR(5),\n  `digestMode` BOOLEAN DEFAULT FALSE NOT NULL,\n  `digestFrequency` ENUM('diario', 'semanal'),\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2zjpxFGuGsCP7jR.root --database Vd5BJ8toX8cUC4zST6itFN --execute CREATE TABLE IF NOT EXISTS `notificationQueue` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `ruleId` INT,\n  `triggerEvent` VARCHAR(100) NOT NULL,\n  `eventData` TEXT NOT NULL,\n  `recipientUserId` INT,\n  `recipientEmail` VARCHAR(320),\n  `recipientName` VARCHAR(255),\n  `subject` VARCHAR(500) NOT NULL,\n  `body` TEXT NOT NULL,\n  `channel` ENUM('email', 'in_app', 'push') NOT NULL,\n  `priority` ENUM('baixa', 'normal', 'alta', 'urgente') DEFAULT 'normal' NOT NULL,\n  `status` ENUM('pendente', 'processando', 'enviado', 'falha', 'cancelado') DEFAULT 'pendente' NOT NULL,\n  `attempts` INT DEFAULT 0 NOT NULL,\n  `maxAttempts` INT DEFAULT 3 NOT NULL,\n  `lastAttemptAt` DATETIME,\n  `nextAttemptAt` DATETIME,\n  `sentAt` DATETIME,\n  `errorMessage` TEXT,\n  `scheduledFor` DATETIME,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS `notificationHistory` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `queueId` INT,\n  `ruleId` INT,\n  `recipientUserId` INT,\n  `recipientEmail` VARCHAR(320),\n  `subject` VARCHAR(500) NOT NULL,\n  `body` TEXT NOT NULL,\n  `channel` VARCHAR(50) NOT NULL,\n  `status` ENUM('enviado', 'falha') NOT NULL,\n  `errorMessage` TEXT,\n  `opened` BOOLEAN DEFAULT FALSE NOT NULL,\n  `openedAt` DATETIME,\n  `clicked` BOOLEAN DEFAULT FALSE NOT NULL,\n  `clickedAt` DATETIME,\n  `sentAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS `userNotificationPreferences` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `userId` INT NOT NULL UNIQUE,\n  `notifyNewAttachment` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyPirChanges` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyGoalUpdates` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notify360Completion` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyFeedback` BOOLEAN DEFAULT TRUE NOT NULL,\n  `notifyPdiUpdates` BOOLEAN DEFAULT TRUE NOT NULL,\n  `emailEnabled` BOOLEAN DEFAULT TRUE NOT NULL,\n  `inAppEnabled` BOOLEAN DEFAULT TRUE NOT NULL,\n  `pushEnabled` BOOLEAN DEFAULT FALSE NOT NULL,\n  `quietHoursEnabled` BOOLEAN DEFAULT FALSE NOT NULL,\n  `quietHoursStart` VARCHAR(5),\n  `quietHoursEnd` VARCHAR(5),\n  `digestMode` BOOLEAN DEFAULT FALSE NOT NULL,\n  `digestFrequency` ENUM('diario', 'semanal'),\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 439
}