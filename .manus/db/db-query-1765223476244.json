{
  "query": "CREATE TABLE IF NOT EXISTS emailQueue (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  destinatario VARCHAR(320) NOT NULL,\n  assunto VARCHAR(500) NOT NULL,\n  corpo TEXT NOT NULL,\n  tipoEmail VARCHAR(100) NOT NULL,\n  prioridade ENUM('baixa', 'normal', 'alta', 'urgente') DEFAULT 'normal' NOT NULL,\n  status ENUM('pendente', 'enviando', 'enviado', 'falhou', 'cancelado') DEFAULT 'pendente' NOT NULL,\n  tentativas INT DEFAULT 0 NOT NULL,\n  maxTentativas INT DEFAULT 3 NOT NULL,\n  proximaTentativa DATETIME,\n  erroMensagem TEXT,\n  metadados TEXT,\n  enviadoEm DATETIME,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_status (status),\n  INDEX idx_proximaTentativa (proximaTentativa),\n  INDEX idx_prioridade (prioridade)\n);\n\nCREATE TABLE IF NOT EXISTS emailLogs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  emailQueueId INT,\n  destinatario VARCHAR(320) NOT NULL,\n  assunto VARCHAR(500) NOT NULL,\n  tipoEmail VARCHAR(100) NOT NULL,\n  status ENUM('sucesso', 'falha', 'bounce', 'spam') NOT NULL,\n  tentativa INT NOT NULL,\n  erroMensagem TEXT,\n  tempoResposta INT,\n  smtpResponse TEXT,\n  metadados TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (emailQueueId) REFERENCES emailQueue(id) ON DELETE SET NULL,\n  INDEX idx_destinatario (destinatario),\n  INDEX idx_status (status),\n  INDEX idx_createdAt (createdAt)\n)",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2zjpxFGuGsCP7jR.root --database Vd5BJ8toX8cUC4zST6itFN --execute CREATE TABLE IF NOT EXISTS emailQueue (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  destinatario VARCHAR(320) NOT NULL,\n  assunto VARCHAR(500) NOT NULL,\n  corpo TEXT NOT NULL,\n  tipoEmail VARCHAR(100) NOT NULL,\n  prioridade ENUM('baixa', 'normal', 'alta', 'urgente') DEFAULT 'normal' NOT NULL,\n  status ENUM('pendente', 'enviando', 'enviado', 'falhou', 'cancelado') DEFAULT 'pendente' NOT NULL,\n  tentativas INT DEFAULT 0 NOT NULL,\n  maxTentativas INT DEFAULT 3 NOT NULL,\n  proximaTentativa DATETIME,\n  erroMensagem TEXT,\n  metadados TEXT,\n  enviadoEm DATETIME,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_status (status),\n  INDEX idx_proximaTentativa (proximaTentativa),\n  INDEX idx_prioridade (prioridade)\n);\n\nCREATE TABLE IF NOT EXISTS emailLogs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  emailQueueId INT,\n  destinatario VARCHAR(320) NOT NULL,\n  assunto VARCHAR(500) NOT NULL,\n  tipoEmail VARCHAR(100) NOT NULL,\n  status ENUM('sucesso', 'falha', 'bounce', 'spam') NOT NULL,\n  tentativa INT NOT NULL,\n  erroMensagem TEXT,\n  tempoResposta INT,\n  smtpResponse TEXT,\n  metadados TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (emailQueueId) REFERENCES emailQueue(id) ON DELETE SET NULL,\n  INDEX idx_destinatario (destinatario),\n  INDEX idx_status (status),\n  INDEX idx_createdAt (createdAt)\n)",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 485
}