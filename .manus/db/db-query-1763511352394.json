{
  "query": "-- Definir 10% dos colaboradores como gestores (aproximadamente 289 gestores)\n-- Atribuir subordinados aos gestores de forma distribuída\n\n-- Primeiro, selecionar 289 colaboradores aleatórios para serem gestores\nUPDATE employees \nSET managerId = NULL \nWHERE id IN (\n  SELECT id FROM (\n    SELECT id FROM employees ORDER BY RAND() LIMIT 289\n  ) AS managers\n);\n\n-- Depois, atribuir os demais colaboradores aos gestores\nUPDATE employees e1\nSET e1.managerId = (\n  SELECT e2.id \n  FROM employees e2 \n  WHERE e2.managerId IS NULL \n    AND e2.id != e1.id\n  ORDER BY RAND() \n  LIMIT 1\n)\nWHERE e1.managerId IS NOT NULL OR e1.id NOT IN (\n  SELECT id FROM employees WHERE managerId IS NULL\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2zjpxFGuGsCP7jR.root --database Vd5BJ8toX8cUC4zST6itFN --execute -- Definir 10% dos colaboradores como gestores (aproximadamente 289 gestores)\n-- Atribuir subordinados aos gestores de forma distribuída\n\n-- Primeiro, selecionar 289 colaboradores aleatórios para serem gestores\nUPDATE employees \nSET managerId = NULL \nWHERE id IN (\n  SELECT id FROM (\n    SELECT id FROM employees ORDER BY RAND() LIMIT 289\n  ) AS managers\n);\n\n-- Depois, atribuir os demais colaboradores aos gestores\nUPDATE employees e1\nSET e1.managerId = (\n  SELECT e2.id \n  FROM employees e2 \n  WHERE e2.managerId IS NULL \n    AND e2.id != e1.id\n  ORDER BY RAND() \n  LIMIT 1\n)\nWHERE e1.managerId IS NOT NULL OR e1.id NOT IN (\n  SELECT id FROM employees WHERE managerId IS NULL\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1022
}